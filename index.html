<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iFinder - Encontre seu Im√≥vel Ideal</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #00214D;
            --secondary-color: #DAA520;
            --accent-color: #f8f9fa;
            --text-color: #333;
            --border-color: #e0e0e0;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--text-color);
        }

        /* Landing Page */
        .landing-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary-color) 0%, #003366 100%);
            color: white;
            text-align: center;
            padding: 2rem;
        }

        .landing-content {
            max-width: 800px;
            animation: fadeInUp 1s ease-out;
        }

        .landing-logo {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 1rem;
            color: var(--secondary-color);
        }

        .landing-subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .landing-description {
            font-size: 1.1rem;
            margin-bottom: 3rem;
            line-height: 1.6;
            opacity: 0.8;
        }

        .cta-button {
            background: var(--secondary-color);
            color: var(--primary-color);
            padding: 1rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .cta-button:hover {
            background: #e6b800;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(218, 165, 32, 0.3);
        }

        /* App Container */
        .app-container {
            display: none;
            min-height: 100vh;
            background: #f8f9fa;
        }

        /* Header */
        .app-header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .app-logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .app-logo i {
            color: var(--secondary-color);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-avatar:hover {
            background: var(--secondary-color);
            color: var(--primary-color);
        }

        /* Navigation */
        .app-nav {
            background: white;
            padding: 0 2rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            gap: 2rem;
            overflow-x: auto;
        }

        .nav-item {
            padding: 1rem 0;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
        }

        .nav-item.active {
            color: var(--primary-color);
            border-bottom-color: var(--secondary-color);
        }

        .nav-item:hover {
            color: var(--primary-color);
        }

        /* Main Content */
        .main-content {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Dashboard */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .stat-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .stat-title {
            font-size: 0.9rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-icon {
            color: var(--primary-color);
            font-size: 1.5rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .stat-description {
            font-size: 0.9rem;
            color: #666;
        }

        /* Swipe Container */
        .swipe-container {
            position: relative;
            max-width: 400px;
            margin: 2rem auto;
            height: 600px;
            perspective: 1000px;
        }

        .property-card {
            position: absolute;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            cursor: grab;
            transition: transform 0.3s ease;
            user-select: none;
        }

        .property-card:active {
            cursor: grabbing;
        }

        .property-card.swiping {
            transition: none;
        }

        .property-image {
            width: 100%;
            height: 60%;
            object-fit: cover;
        }

        .property-info {
            padding: 1.5rem;
            height: 40%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .property-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .property-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .property-location {
            color: #666;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .property-features {
            display: flex;
            gap: 1rem;
            color: #666;
            font-size: 0.9rem;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        /* Swipe Controls */
        .swipe-controls {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }

        .swipe-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .reject-btn {
            background: var(--danger-color);
            color: white;
        }

        .reject-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .like-btn {
            background: var(--success-color);
            color: white;
        }

        .like-btn:hover {
            background: #218838;
            transform: scale(1.1);
        }

        .super-like-btn {
            background: var(--info-color);
            color: white;
        }

        .super-like-btn:hover {
            background: #138496;
            transform: scale(1.1);
        }

        /* Search Section */
        .search-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .search-tab {
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--border-color);
            border-radius: 25px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-tab.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .search-filters {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .search-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1.5rem;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            font-weight: 600;
            color: var(--text-color);
        }

        .filter-select {
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .price-range {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .price-input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
        }

        .filter-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #001a3d;
        }

        .btn-secondary {
            background: var(--border-color);
            color: var(--text-color);
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        /* Results Grid */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .result-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .result-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .result-info {
            padding: 1.5rem;
        }

        .result-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .result-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .result-location {
            color: #666;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-features {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            color: #666;
            font-size: 0.9rem;
        }

        .result-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-contact {
            flex: 1;
            background: var(--secondary-color);
            color: var(--primary-color);
            padding: 0.75rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-contact:hover {
            background: #e6b800;
        }

        /* Matches Section */
        .matches-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .view-toggle {
            display: flex;
            gap: 0.5rem;
        }

        .toggle-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--primary-color);
            background: white;
            color: var(--primary-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-btn.active {
            background: var(--primary-color);
            color: white;
        }

        .matches-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .match-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--success-color);
            position: relative;
        }

        .match-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--success-color);
            color: white;
            padding: 0.5rem;
            border-radius: 50%;
            z-index: 10;
        }

        /* Map Container */
        .map-container {
            display: none;
            height: 600px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .map-container.active {
            display: block;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .map-controls {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .map-control-btn {
            background: white;
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .map-control-btn:hover {
            background: var(--accent-color);
        }

        /* Account Section */
        .account-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }

        .account-tab {
            padding: 1rem 2rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .account-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--secondary-color);
        }

        .account-content {
            display: none;
        }

        .account-content.active {
            display: block;
        }

        .profile-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 600;
        }

        .profile-info h2 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .profile-info p {
            color: #666;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        /* Property Management */
        .my-properties {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .my-property-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .property-status {
            position: absolute;
            top: 1rem;
            left: 1rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 10;
        }

        .status-active {
            background: var(--success-color);
            color: white;
        }

        .status-pending {
            background: var(--warning-color);
            color: var(--text-color);
        }

        .status-inactive {
            background: var(--danger-color);
            color: white;
        }

        .property-actions {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
        }

        .btn-edit {
            flex: 1;
            background: var(--info-color);
            color: white;
        }

        .btn-delete {
            flex: 1;
            background: var(--danger-color);
            color: white;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--accent-color);
            color: var(--text-color);
        }

        /* Property Form */
        .property-form {
            display: grid;
            gap: 1.5rem;
        }

        .form-section {
            background: var(--accent-color);
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid var(--secondary-color);
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .image-upload {
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .image-upload:hover {
            border-color: var(--primary-color);
            background: var(--accent-color);
        }

        .image-upload.dragover {
            border-color: var(--secondary-color);
            background: #fff9e6;
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--border-color);
            margin-bottom: 1rem;
        }

        .image-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .preview-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
        }

        .preview-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-image {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 10001;
            display: flex;
            align-items: center;
            gap: 1rem;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-success {
            border-left: 4px solid var(--success-color);
        }

        .toast-error {
            border-left: 4px solid var(--danger-color);
        }

        .toast-info {
            border-left: 4px solid var(--info-color);
        }

        .toast-icon {
            font-size: 1.2rem;
        }

        .toast-success .toast-icon {
            color: var(--success-color);
        }

        .toast-error .toast-icon {
            color: var(--danger-color);
        }

        .toast-info .toast-icon {
            color: var(--info-color);
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #666;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .empty-description {
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
            }
            to {
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
            }

            .app-header {
                padding: 1rem;
            }

            .app-nav {
                padding: 0 1rem;
            }

            .dashboard-stats {
                grid-template-columns: 1fr;
            }

            .swipe-container {
                max-width: 350px;
                height: 500px;
            }

            .filter-row {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .matches-list {
                grid-template-columns: 1fr;
            }

            .my-properties {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .search-tabs {
                flex-direction: column;
            }

            .account-tabs {
                flex-direction: column;
                gap: 0;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .landing-logo {
                font-size: 3rem;
            }

            .landing-subtitle {
                font-size: 1.2rem;
            }

            .swipe-container {
                max-width: 300px;
                height: 450px;
            }

            .swipe-controls {
                gap: 1rem;
            }

            .swipe-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .modal-content {
                padding: 1rem;
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <!-- Landing Page -->
    <div id="landingPage" class="landing-page">
        <div class="landing-content">
            <div class="landing-logo">
                <i class="fas fa-home"></i> iFinder
            </div>
            <div class="landing-subtitle">Encontre seu Im√≥vel Ideal</div>
            <div class="landing-description">
                A plataforma mais moderna para encontrar e anunciar im√≥veis. 
                Sistema de match inteligente, busca avan√ßada e mapa interativo.
                Conecte-se com propriet√°rios e corretores de forma simples e eficiente.
            </div>
            <button class="cta-button" onclick="showAuthModal()">
                Come√ßar Agora
            </button>
        </div>
    </div>

    <!-- App Container -->
    <div id="appContainer" class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="app-logo">
                <i class="fas fa-home"></i>
                iFinder
            </div>
            <div class="user-info">
                <span id="userName">Usu√°rio</span>
                <div class="user-avatar" id="userAvatar" onclick="showSection('account')">
                    U
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="app-nav">
            <div class="nav-item active" onclick="showSection('dashboard')">
                <i class="fas fa-home"></i> In√≠cio
            </div>
            <div class="nav-item" onclick="showSection('swipe')">
                <i class="fas fa-search"></i> Buscar
            </div>
            <div class="nav-item" onclick="showSection('matches')">
                <i class="fas fa-heart"></i> Matches
            </div>
            <div class="nav-item" onclick="showSection('register-property')">
                <i class="fas fa-plus"></i> Cadastrar
            </div>
            <div class="nav-item" onclick="showSection('account')">
                <i class="fas fa-user"></i> Conta
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <h1>Dashboard</h1>
                <div class="dashboard-stats">
                    <div class="stat-card" onclick="showSection('swipe')">
                        <div class="stat-header">
                            <div class="stat-title">Im√≥veis Vistos</div>
                            <div class="stat-icon"><i class="fas fa-eye"></i></div>
                        </div>
                        <div class="stat-value" id="viewedCount">0</div>
                        <div class="stat-description">Total de im√≥veis visualizados</div>
                    </div>
                    <div class="stat-card" onclick="showSection('matches')">
                        <div class="stat-header">
                            <div class="stat-title">Matches</div>
                            <div class="stat-icon"><i class="fas fa-heart"></i></div>
                        </div>
                        <div class="stat-value" id="matchesCount">0</div>
                        <div class="stat-description">Im√≥veis que voc√™ curtiu</div>
                    </div>
                    <div class="stat-card" onclick="showSection('register-property')">
                        <div class="stat-header">
                            <div class="stat-title">Meus Im√≥veis</div>
                            <div class="stat-icon"><i class="fas fa-building"></i></div>
                        </div>
                        <div class="stat-value" id="myPropertiesCount">0</div>
                        <div class="stat-description">Im√≥veis cadastrados por voc√™</div>
                    </div>
                    <div class="stat-card" onclick="showAccountTab('my-properties')">
                        <div class="stat-header">
                            <div class="stat-title">Visualiza√ß√µes</div>
                            <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                        </div>
                        <div class="stat-value" id="totalViews">0</div>
                        <div class="stat-description">Visualiza√ß√µes dos seus im√≥veis</div>
                    </div>
                </div>

                <div class="profile-section">
                    <h2><i class="fas fa-chart-line"></i> Atividade Recente</h2>
                    <div id="recentActivity">
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-clock"></i></div>
                            <div class="empty-title">Nenhuma atividade recente</div>
                            <div class="empty-description">Comece explorando im√≥veis na se√ß√£o "Buscar"!</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Swipe Section -->
            <section id="swipe" class="section">
                <h1>Encontre seu Im√≥vel Ideal</h1>
                <div class="swipe-container" id="swipeContainer">
                    <!-- Property cards will be inserted here -->
                </div>
                <div class="swipe-controls">
                    <button class="swipe-btn reject-btn" onclick="rejectProperty()">
                        <i class="fas fa-times"></i>
                    </button>
                    <button class="swipe-btn super-like-btn" onclick="superLikeProperty()">
                        <i class="fas fa-star"></i>
                    </button>
                    <button class="swipe-btn like-btn" onclick="likeProperty()">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
                
                <!-- Optional Search Tab -->
                <div style="margin-top: 3rem;">
                    <h2>Ou use a busca avan√ßada</h2>
                    <div class="search-tabs">
                        <div class="search-tab active" onclick="switchSearchTab('properties')">
                            <i class="fas fa-home"></i> Buscar Im√≥veis
                        </div>
                        <div class="search-tab" onclick="switchSearchTab('users')">
                            <i class="fas fa-users"></i> Buscar Usu√°rios
                        </div>
                    </div>

                    <!-- Property Search -->
                    <div id="propertySearch" class="search-content active">
                        <div class="search-filters">
                            <input type="text" class="search-input" placeholder="Busque por localiza√ß√£o, t√≠tulo ou descri√ß√£o..." id="propertySearchInput">
                            
                            <div class="filter-row">
                                <div class="filter-group">
                                    <label class="filter-label">Tipo de Im√≥vel</label>
                                    <select class="filter-select" id="propertyType">
                                        <option value="">Todos os tipos</option>
                                        <option value="casa">Casa</option>
                                        <option value="apartamento">Apartamento</option>
                                        <option value="comercial">Comercial</option>
                                        <option value="terreno">Terreno</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label class="filter-label">Quartos</label>
                                    <select class="filter-select" id="bedrooms">
                                        <option value="">Qualquer quantidade</option>
                                        <option value="1">1 quarto</option>
                                        <option value="2">2 quartos</option>
                                        <option value="3">3 quartos</option>
                                        <option value="4">4+ quartos</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label class="filter-label">Localiza√ß√£o</label>
                                    <select class="filter-select" id="location">
                                        <option value="">Todas as cidades</option>
                                        <option value="S√£o Paulo">S√£o Paulo</option>
                                        <option value="Rio de Janeiro">Rio de Janeiro</option>
                                        <option value="Campos do Jord√£o">Campos do Jord√£o</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label class="filter-label">Faixa de Pre√ßo</label>
                                    <div class="price-range">
                                        <input type="number" class="price-input" placeholder="M√≠n" id="minPrice">
                                        <span>at√©</span>
                                        <input type="number" class="price-input" placeholder="M√°x" id="maxPrice">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="filter-actions">
                                <button class="btn btn-secondary" onclick="clearFilters()">
                                    <i class="fas fa-times"></i> Limpar Filtros
                                </button>
                                <button class="btn btn-primary" onclick="searchProperties()">
                                    <i class="fas fa-search"></i> Buscar
                                </button>
                            </div>
                        </div>

                        <div class="results-grid" id="propertyResults">
                            <!-- Search results will be inserted here -->
                        </div>
                    </div>

                    <!-- User Search -->
                    <div id="userSearch" class="search-content">
                        <div class="search-filters">
                            <input type="text" class="search-input" placeholder="Busque por nome ou tipo de usu√°rio..." id="userSearchInput">
                            
                            <div class="filter-row">
                                <div class="filter-group">
                                    <label class="filter-label">Tipo de Usu√°rio</label>
                                    <select class="filter-select" id="userType">
                                        <option value="">Todos os tipos</option>
                                        <option value="interessado">Interessado</option>
                                        <option value="proprietario">Propriet√°rio</option>
                                        <option value="corretor">Corretor</option>
                                        <option value="imobiliaria">Imobili√°ria</option>
                                        <option value="investidor">Investidor</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label class="filter-label">Ordenar por</label>
                                    <select class="filter-select" id="userSort">
                                        <option value="name">Nome</option>
                                        <option value="recent">Mais recentes</option>
                                        <option value="properties">Mais im√≥veis</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="filter-actions">
                                <button class="btn btn-secondary" onclick="clearUserFilters()">
                                    <i class="fas fa-times"></i> Limpar Filtros
                                </button>
                                <button class="btn btn-primary" onclick="searchUsers()">
                                    <i class="fas fa-search"></i> Buscar
                                </button>
                            </div>
                        </div>

                        <div class="results-grid" id="userResults">
                            <!-- User search results will be inserted here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Matches Section -->
            <section id="matches" class="section">
                <div class="matches-header">
                    <h1>Seus Matches</h1>
                    <div class="view-toggle">
                        <button class="toggle-btn active" onclick="toggleMatchView('list')">
                            <i class="fas fa-list"></i> Lista
                        </button>
                        <button class="toggle-btn" onclick="toggleMatchView('map')">
                            <i class="fas fa-map"></i> Mapa
                        </button>
                    </div>
                </div>

                <div id="matchesList" class="matches-list">
                    <!-- Matches will be inserted here -->
                </div>

                <div id="matchesMap" class="map-container">
                    <div id="map"></div>
                    <div class="map-controls">
                        <button class="map-control-btn" onclick="centerMap()" title="Centralizar Mapa">
                            <i class="fas fa-crosshairs"></i>
                        </button>
                        <button class="map-control-btn" onclick="toggleMapLayer()" title="Alternar Camada">
                            <i class="fas fa-layer-group"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Register Property Section -->
            <section id="register-property" class="section">
                <h1>Cadastrar Im√≥vel</h1>
                <div class="profile-section">
                    <p>Cadastre seu im√≥vel e conecte-se com interessados em toda a plataforma.</p>
                    <button class="btn btn-primary" onclick="showPropertyModal()" style="margin-top: 1rem;">
                        <i class="fas fa-plus"></i> Novo Im√≥vel
                    </button>
                </div>

                <div id="myPropertiesList" class="my-properties">
                    <!-- User's properties will be inserted here -->
                </div>
            </section>

            <!-- Account Section -->
            <section id="account" class="section">
                <h1>Minha Conta</h1>
                
                <div class="account-tabs">
                    <div class="account-tab active" onclick="showAccountTab('profile')">
                        <i class="fas fa-user"></i> Perfil
                    </div>
                    <div class="account-tab" onclick="showAccountTab('my-properties')">
                        <i class="fas fa-building"></i> Meus Im√≥veis
                    </div>
                    <div class="account-tab" onclick="showAccountTab('settings')">
                        <i class="fas fa-cog"></i> Configura√ß√µes
                    </div>
                </div>

                <!-- Profile Tab -->
                <div id="profileTab" class="account-content active">
                    <div class="profile-section">
                        <div class="profile-header">
                            <div class="profile-avatar" id="profileAvatar">U</div>
                            <div class="profile-info">
                                <h2 id="profileName">Nome do Usu√°rio</h2>
                                <p id="profileType">Tipo de Usu√°rio</p>
                                <p id="profileEmail">email@exemplo.com</p>
                            </div>
                        </div>

                        <form id="profileForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Nome Completo</label>
                                    <input type="text" class="form-input" id="editName" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Apelido/Nome de Exibi√ß√£o</label>
                                    <input type="text" class="form-input" id="editNickname">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-input" id="editEmail" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Telefone</label>
                                    <input type="tel" class="form-input" id="editPhone">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tipo de Usu√°rio</label>
                                <select class="form-input" id="editUserType" required>
                                    <option value="interessado">Interessado</option>
                                    <option value="proprietario">Propriet√°rio</option>
                                    <option value="corretor">Corretor</option>
                                    <option value="imobiliaria">Imobili√°ria</option>
                                    <option value="investidor">Investidor</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Salvar Altera√ß√µes
                            </button>
                        </form>
                    </div>
                </div>

                <!-- My Properties Tab -->
                <div id="myPropertiesTab" class="account-content">
                    <div class="profile-section">
                        <h2>Meus Im√≥veis Cadastrados</h2>
                        <div id="accountPropertiesList" class="my-properties">
                            <!-- Properties will be inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settingsTab" class="account-content">
                    <div class="profile-section">
                        <h2>Configura√ß√µes</h2>
                        <form id="passwordForm">
                            <div class="form-group">
                                <label class="form-label">Alterar Senha</label>
                                <input type="password" class="form-input" id="newPassword" placeholder="Nova senha">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Confirmar Nova Senha</label>
                                <input type="password" class="form-input" id="confirmPassword" placeholder="Confirmar nova senha">
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-key"></i> Alterar Senha
                            </button>
                        </form>
                        
                        <hr style="margin: 2rem 0;">
                        
                        <button class="btn btn-secondary" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Sair
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="authTitle">Entrar</h2>
                <button class="modal-close" onclick="closeModal('authModal')">&times;</button>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" style="display: block;">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Senha</label>
                    <input type="password" class="form-input" id="loginPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">
                    Entrar
                </button>
                <p style="text-align: center;">
                    N√£o tem conta? 
                    <a href="#" onclick="switchAuthMode('register')" style="color: var(--primary-color);">Cadastre-se</a>
                </p>
            </form>

            <!-- Register Form -->
            <form id="registerForm" style="display: none;">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Nome Completo</label>
                        <input type="text" class="form-input" id="registerName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="registerEmail" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="registerCPF" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="tel" class="form-input" id="registerPhone" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Tipo de Usu√°rio</label>
                    <select class="form-input" id="registerUserType" required>
                        <option value="">Selecione...</option>
                        <option value="interessado">Interessado</option>
                        <option value="proprietario">Propriet√°rio</option>
                        <option value="corretor">Corretor</option>
                        <option value="imobiliaria">Imobili√°ria</option>
                        <option value="investidor">Investidor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Senha</label>
                    <input type="password" class="form-input" id="registerPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">
                    Cadastrar
                </button>
                <p style="text-align: center;">
                    J√° tem conta? 
                    <a href="#" onclick="switchAuthMode('login')" style="color: var(--primary-color);">Fa√ßa login</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Property Modal -->
    <div id="propertyModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 class="modal-title">Cadastrar Im√≥vel</h2>
                <button class="modal-close" onclick="closeModal('propertyModal')">&times;</button>
            </div>
            
            <form id="propertyForm" class="property-form">
                <!-- Basic Info Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="fas fa-info-circle"></i> Informa√ß√µes B√°sicas
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">T√≠tulo do An√∫ncio</label>
                            <input type="text" class="form-input" id="propertyTitle" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Tipo de Im√≥vel</label>
                            <select class="form-input" id="propertyTypeSelect" required>
                                <option value="">Selecione...</option>
                                <option value="casa">Casa</option>
                                <option value="apartamento">Apartamento</option>
                                <option value="comercial">Comercial</option>
                                <option value="terreno">Terreno</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descri√ß√£o</label>
                        <textarea class="form-input" id="propertyDescription" rows="4" required></textarea>
                    </div>
                </div>

                <!-- Location Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="fas fa-map-marker-alt"></i> Localiza√ß√£o
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Cidade</label>
                            <input type="text" class="form-input" id="propertyCity" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Bairro</label>
                            <input type="text" class="form-input" id="propertyNeighborhood" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Endere√ßo Completo</label>
                        <input type="text" class="form-input" id="propertyAddress" required>
                    </div>
                </div>

                <!-- Features Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="fas fa-home"></i> Caracter√≠sticas
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Quartos</label>
                            <input type="number" class="form-input" id="propertyBedrooms" min="0" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Banheiros</label>
                            <input type="number" class="form-input" id="propertyBathrooms" min="0" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">√Årea (m¬≤)</label>
                            <input type="number" class="form-input" id="propertyArea" min="0" required>
                        </div>
                    </div>
                </div>

                <!-- Price Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="fas fa-dollar-sign"></i> Pre√ßo
                    </div>
                    <div class="form-group">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-input" id="propertyPrice" min="0" required>
                    </div>
                </div>

                <!-- Images Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="fas fa-images"></i> Fotos (at√© 10)
                    </div>
                    <div class="image-upload" onclick="document.getElementById('propertyImages').click()">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <p>Clique para selecionar fotos ou arraste aqui</p>
                        <p style="font-size: 0.9rem; color: #666;">Formatos: JPG, PNG (m√°x. 5MB cada)</p>
                    </div>
                    <input type="file" id="propertyImages" multiple accept="image/*" style="display: none;">
                    <div id="imagePreview" class="image-preview"></div>
                </div>

                <!-- Contact Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="fas fa-phone"></i> Contato
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Telefone para Contato</label>
                            <input type="tel" class="form-input" id="propertyContactPhone" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email para Contato</label>
                            <input type="email" class="form-input" id="propertyContactEmail" required>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-save"></i> Cadastrar Im√≥vel
                </button>
            </form>
        </div>
    </div>

    <!-- Match Modal -->
    <div id="matchModal" class="modal">
        <div class="modal-content" style="text-align: center;">
            <div class="modal-header">
                <h2 class="modal-title">üéâ √â um Match!</h2>
                <button class="modal-close" onclick="closeModal('matchModal')">&times;</button>
            </div>
            <div id="matchContent">
                <p>Voc√™ curtiu este im√≥vel!</p>
                <p>Agora voc√™ pode entrar em contato com o propriet√°rio.</p>
            </div>
            <button class="btn btn-primary" onclick="closeModal('matchModal')">
                Continuar Explorando
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Global Variables
        let currentUser = null;
        let currentPropertyIndex = 0;
        let matches = [];
        let viewedProperties = [];
        let userProperties = [];
        let map = null;
        let mapMarkers = [];
        let currentSearchTab = 'properties';

        // Sample Properties Data
        const sampleProperties = [
            {
                id: 1,
                title: "Sobrado Familiar Espa√ßoso",
                type: "casa",
                price: 950000,
                location: "Moema, S√£o Paulo - SP",
                city: "S√£o Paulo",
                neighborhood: "Moema",
                bedrooms: 4,
                bathrooms: 3,
                area: 280,
                image: "https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=400&h=300&fit=crop",
                description: "Linda casa familiar com amplo quintal e piscina",
                owner: "Jo√£o Silva",
                ownerType: "Propriet√°rio",
                coordinates: [-23.5505, -46.6333]
            },
            {
                id: 2,
                title: "Loft Industrial Charmoso",
                type: "apartamento",
                price: 750000,
                location: "Vila Ol√≠mpia, S√£o Paulo - SP",
                city: "S√£o Paulo",
                neighborhood: "Vila Ol√≠mpia",
                bedrooms: 2,
                bathrooms: 1,
                area: 110,
                image: "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=400&h=300&fit=crop",
                description: "Loft moderno com acabamento industrial premium",
                owner: "Maria Santos",
                ownerType: "Corretor",
                coordinates: [-23.5629, -46.6544]
            },
            {
                id: 3,
                title: "Cobertura Duplex Premium",
                type: "apartamento",
                price: 2500000,
                location: "Jardins, S√£o Paulo - SP",
                city: "S√£o Paulo",
                neighborhood: "Jardins",
                bedrooms: 4,
                bathrooms: 3,
                area: 250,
                image: "https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=400&h=300&fit=crop",
                description: "Cobertura luxuosa com vista panor√¢mica da cidade",
                owner: "Carlos Oliveira",
                ownerType: "Imobili√°ria",
                coordinates: [-23.5629, -46.6544]
            },
            {
                id: 4,
                title: "Casa de Campo Aconchegante",
                type: "casa",
                price: 1200000,
                location: "Campos do Jord√£o - SP",
                city: "Campos do Jord√£o",
                neighborhood: "Centro",
                bedrooms: 3,
                bathrooms: 2,
                area: 180,
                image: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=400&h=300&fit=crop",
                description: "Casa aconchegante na serra com lareira e jardim",
                owner: "Ana Costa",
                ownerType: "Propriet√°rio",
                coordinates: [-22.7394, -45.5919]
            },
            {
                id: 5,
                title: "Apartamento Moderno Centro",
                type: "apartamento",
                price: 850000,
                location: "Tijuca, Rio de Janeiro - RJ",
                city: "Rio de Janeiro",
                neighborhood: "Tijuca",
                bedrooms: 3,
                bathrooms: 2,
                area: 120,
                image: "https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=400&h=300&fit=crop",
                description: "Apartamento reformado com varanda e vista livre",
                owner: "Pedro Lima",
                ownerType: "Corretor",
                coordinates: [-22.9249, -43.2311]
            },
            {
                id: 6,
                title: "Casa T√©rrea com Piscina",
                type: "casa",
                price: 680000,
                location: "Alphaville, Barueri - SP",
                city: "Barueri",
                neighborhood: "Alphaville",
                bedrooms: 3,
                bathrooms: 2,
                area: 180,
                image: "https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?w=400&h=300&fit=crop",
                description: "Casa em condom√≠nio fechado com √°rea de lazer completa",
                owner: "Lucia Ferreira",
                ownerType: "Propriet√°rio",
                coordinates: [-23.5505, -46.6333]
            },
            {
                id: 7,
                title: "Apartamento com Vista para o Mar",
                type: "apartamento",
                price: 1200000,
                location: "Copacabana, Rio de Janeiro - RJ",
                city: "Rio de Janeiro",
                neighborhood: "Copacabana",
                bedrooms: 2,
                bathrooms: 2,
                area: 95,
                image: "https://images.unsplash.com/photo-1600607687644-c7171b42498b?w=400&h=300&fit=crop",
                description: "Apartamento frente mar com varanda e vista deslumbrante",
                owner: "Roberto Silva",
                ownerType: "Imobili√°ria",
                coordinates: [-22.9068, -43.1729]
            },
            {
                id: 8,
                title: "Casa Comercial Estrat√©gica",
                type: "comercial",
                price: 1800000,
                location: "Vila Madalena, S√£o Paulo - SP",
                city: "S√£o Paulo",
                neighborhood: "Vila Madalena",
                bedrooms: 0,
                bathrooms: 4,
                area: 300,
                image: "https://images.unsplash.com/photo-1600585154526-990dced4db0d?w=400&h=300&fit=crop",
                description: "Im√≥vel comercial em localiza√ß√£o privilegiada",
                owner: "Empresa XYZ",
                ownerType: "Imobili√°ria",
                coordinates: [-23.5505, -46.6333]
            }
        ];

        // Sample Users Data
        const sampleUsers = [
            {
                id: 1,
                name: "Jo√£o Silva",
                type: "proprietario",
                email: "joao@email.com",
                phone: "(11) 99999-9999",
                properties: 3,
                avatar: "JS"
            },
            {
                id: 2,
                name: "Maria Santos",
                type: "corretor",
                email: "maria@email.com",
                phone: "(11) 88888-8888",
                properties: 12,
                avatar: "MS"
            },
            {
                id: 3,
                name: "Carlos Oliveira",
                type: "imobiliaria",
                email: "carlos@email.com",
                phone: "(11) 77777-7777",
                properties: 25,
                avatar: "CO"
            },
            {
                id: 4,
                name: "Ana Costa",
                type: "interessado",
                email: "ana@email.com",
                phone: "(11) 66666-6666",
                properties: 0,
                avatar: "AC"
            }
        ];

        // Initialize App
        function initApp() {
            loadUserData();
            loadMatches();
            loadUserProperties();
            initializeSwipe();
            updateDashboardStats();
            
            // Load initial search results
            searchProperties();
            searchUsers();
        }

        // Authentication Functions
        function showAuthModal() {
            document.getElementById('authModal').classList.add('active');
        }

        function switchAuthMode(mode) {
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const authTitle = document.getElementById('authTitle');

            if (mode === 'login') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                authTitle.textContent = 'Entrar';
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                authTitle.textContent = 'Cadastrar';
            }
        }

        // Handle Login
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            // Simple validation (in real app, this would be server-side)
            if (email && password) {
                // Simulate login
                currentUser = {
                    id: Date.now(),
                    name: email.split('@')[0],
                    email: email,
                    type: 'interessado'
                };
                
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                closeModal('authModal');
                showApp();
                showToast('Login realizado com sucesso!', 'success');
            }
        });

        // Handle Register
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const cpf = document.getElementById('registerCPF').value;
            const phone = document.getElementById('registerPhone').value;
            const userType = document.getElementById('registerUserType').value;
            const password = document.getElementById('registerPassword').value;

            if (name && email && cpf && phone && userType && password) {
                currentUser = {
                    id: Date.now(),
                    name: name,
                    email: email,
                    cpf: cpf,
                    phone: phone,
                    type: userType
                };
                
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                closeModal('authModal');
                showApp();
                showToast('Cadastro realizado com sucesso!', 'success');
            }
        });

        function showApp() {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';
            updateUserInfo();
            initApp();
        }

        function updateUserInfo() {
            if (currentUser) {
                document.getElementById('userName').textContent = currentUser.name;
                const avatar = document.getElementById('userAvatar');
                avatar.textContent = currentUser.name.charAt(0).toUpperCase();
                
                // Update profile section
                document.getElementById('profileName').textContent = currentUser.name;
                document.getElementById('profileType').textContent = getUserTypeLabel(currentUser.type);
                document.getElementById('profileEmail').textContent = currentUser.email;
                document.getElementById('profileAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
                
                // Fill profile form
                document.getElementById('editName').value = currentUser.name;
                document.getElementById('editNickname').value = currentUser.nickname || '';
                document.getElementById('editEmail').value = currentUser.email;
                document.getElementById('editPhone').value = currentUser.phone || '';
                document.getElementById('editUserType').value = currentUser.type;
            }
        }

        function getUserTypeLabel(type) {
            const labels = {
                'interessado': 'Interessado',
                'proprietario': 'Propriet√°rio',
                'corretor': 'Corretor',
                'imobiliaria': 'Imobili√°ria',
                'investidor': 'Investidor'
            };
            return labels[type] || type;
        }

        // Navigation Functions
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to corresponding nav item
            const navItems = document.querySelectorAll('.nav-item');
            const sectionIndex = ['dashboard', 'swipe', 'matches', 'register-property', 'account'].indexOf(sectionId);
            if (sectionIndex !== -1 && navItems[sectionIndex]) {
                navItems[sectionIndex].classList.add('active');
            }
            
            // Special handling for specific sections
            if (sectionId === 'matches') {
                loadMatches();
            } else if (sectionId === 'register-property') {
                loadMyProperties();
            } else if (sectionId === 'swipe') {
                initializeSwipe();
            }
            
            showToast(`Navegando para ${getSectionName(sectionId)}`, 'info');
        }

        function getSectionName(sectionId) {
            const names = {
                'dashboard': 'In√≠cio',
                'swipe': 'Buscar Im√≥veis',
                'matches': 'Seus Matches',
                'register-property': 'Cadastrar Im√≥vel',
                'account': 'Minha Conta'
            };
            return names[sectionId] || sectionId;
        }

        function showAccountTab(tabId) {
            showSection('account');
            
            // Hide all account contents
            document.querySelectorAll('.account-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from account tabs
            document.querySelectorAll('.account-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            const tabMap = {
                'profile': 'profileTab',
                'my-properties': 'myPropertiesTab',
                'settings': 'settingsTab'
            };
            
            const contentId = tabMap[tabId];
            if (contentId) {
                document.getElementById(contentId).classList.add('active');
            }
            
            // Add active class to corresponding tab
            const tabs = document.querySelectorAll('.account-tab');
            const tabIndex = ['profile', 'my-properties', 'settings'].indexOf(tabId);
            if (tabIndex !== -1 && tabs[tabIndex]) {
                tabs[tabIndex].classList.add('active');
            }
            
            // Load content for specific tabs
            if (tabId === 'my-properties') {
                loadAccountProperties();
            }
        }

        // Swipe Functions
        function initializeSwipe() {
            const container = document.getElementById('swipeContainer');
            container.innerHTML = '';
            currentPropertyIndex = 0;
            
            // Create property cards
            for (let i = 0; i < Math.min(3, sampleProperties.length); i++) {
                const property = sampleProperties[(currentPropertyIndex + i) % sampleProperties.length];
                const card = createPropertyCard(property, i);
                container.appendChild(card);
            }
            
            // Add swipe functionality
            addSwipeListeners();
        }

        function createPropertyCard(property, zIndex) {
            const card = document.createElement('div');
            card.className = 'property-card';
            card.style.zIndex = 10 - zIndex;
            card.dataset.propertyId = property.id;
            
            card.innerHTML = `
                <img src="${property.image}" alt="${property.title}" class="property-image">
                <div class="property-info">
                    <div class="property-price">R$ ${property.price.toLocaleString('pt-BR')}</div>
                    <div class="property-title">${property.title}</div>
                    <div class="property-location">
                        <i class="fas fa-map-marker-alt"></i>
                        ${property.location}
                    </div>
                    <div class="property-features">
                        <div class="feature">
                            <i class="fas fa-bed"></i>
                            ${property.bedrooms}
                        </div>
                        <div class="feature">
                            <i class="fas fa-bath"></i>
                            ${property.bathrooms}
                        </div>
                        <div class="feature">
                            <i class="fas fa-ruler-combined"></i>
                            ${property.area}m¬≤
                        </div>
                    </div>
                </div>
            `;
            
            return card;
        }

        function addSwipeListeners() {
            const cards = document.querySelectorAll('.property-card');
            
            cards.forEach(card => {
                let startX = 0;
                let startY = 0;
                let currentX = 0;
                let currentY = 0;
                let isDragging = false;
                
                // Mouse events
                card.addEventListener('mousedown', startDrag);
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', endDrag);
                
                // Touch events
                card.addEventListener('touchstart', startDrag);
                document.addEventListener('touchmove', drag);
                document.addEventListener('touchend', endDrag);
                
                function startDrag(e) {
                    if (card.style.zIndex !== '10') return;
                    
                    isDragging = true;
                    card.classList.add('swiping');
                    
                    const clientX = e.clientX || e.touches[0].clientX;
                    const clientY = e.clientY || e.touches[0].clientY;
                    
                    startX = clientX;
                    startY = clientY;
                }
                
                function drag(e) {
                    if (!isDragging || card.style.zIndex !== '10') return;
                    
                    e.preventDefault();
                    
                    const clientX = e.clientX || e.touches[0].clientX;
                    const clientY = e.clientY || e.touches[0].clientY;
                    
                    currentX = clientX - startX;
                    currentY = clientY - startY;
                    
                    const rotation = currentX * 0.1;
                    card.style.transform = `translate(${currentX}px, ${currentY}px) rotate(${rotation}deg)`;
                    
                    // Add visual feedback
                    const opacity = Math.max(0.5, 1 - Math.abs(currentX) / 200);
                    card.style.opacity = opacity;
                }
                
                function endDrag() {
                    if (!isDragging || card.style.zIndex !== '10') return;
                    
                    isDragging = false;
                    card.classList.remove('swiping');
                    
                    const threshold = 100;
                    
                    if (Math.abs(currentX) > threshold) {
                        // Swipe detected
                        if (currentX > 0) {
                            likeProperty();
                        } else {
                            rejectProperty();
                        }
                    } else {
                        // Return to center
                        card.style.transform = '';
                        card.style.opacity = '';
                    }
                    
                    currentX = 0;
                    currentY = 0;
                }
            });
        }

        function likeProperty() {
            const topCard = document.querySelector('.property-card[style*="z-index: 10"]');
            if (!topCard) return;
            
            const propertyId = parseInt(topCard.dataset.propertyId);
            const property = sampleProperties.find(p => p.id === propertyId);
            
            if (property) {
                matches.push(property);
                viewedProperties.push(propertyId);
                localStorage.setItem('matches', JSON.stringify(matches));
                localStorage.setItem('viewedProperties', JSON.stringify(viewedProperties));
                
                // Animate card out
                topCard.style.transform = 'translateX(100%) rotate(30deg)';
                topCard.style.opacity = '0';
                
                setTimeout(() => {
                    nextProperty();
                    showMatchModal(property);
                    updateDashboardStats();
                }, 300);
            }
        }

        function rejectProperty() {
            const topCard = document.querySelector('.property-card[style*="z-index: 10"]');
            if (!topCard) return;
            
            const propertyId = parseInt(topCard.dataset.propertyId);
            viewedProperties.push(propertyId);
            localStorage.setItem('viewedProperties', JSON.stringify(viewedProperties));
            
            // Animate card out
            topCard.style.transform = 'translateX(-100%) rotate(-30deg)';
            topCard.style.opacity = '0';
            
            setTimeout(() => {
                nextProperty();
                updateDashboardStats();
            }, 300);
        }

        function superLikeProperty() {
            const topCard = document.querySelector('.property-card[style*="z-index: 10"]');
            if (!topCard) return;
            
            const propertyId = parseInt(topCard.dataset.propertyId);
            const property = sampleProperties.find(p => p.id === propertyId);
            
            if (property) {
                property.superLiked = true;
                matches.push(property);
                viewedProperties.push(propertyId);
                localStorage.setItem('matches', JSON.stringify(matches));
                localStorage.setItem('viewedProperties', JSON.stringify(viewedProperties));
                
                // Animate card up
                topCard.style.transform = 'translateY(-100%) rotate(0deg)';
                topCard.style.opacity = '0';
                
                setTimeout(() => {
                    nextProperty();
                    showMatchModal(property, true);
                    updateDashboardStats();
                }, 300);
            }
        }

        function nextProperty() {
            currentPropertyIndex++;
            
            const container = document.getElementById('swipeContainer');
            const cards = container.querySelectorAll('.property-card');
            
            // Remove the top card
            if (cards.length > 0) {
                container.removeChild(cards[0]);
            }
            
            // Update z-index of remaining cards
            const remainingCards = container.querySelectorAll('.property-card');
            remainingCards.forEach((card, index) => {
                card.style.zIndex = 10 - index;
            });
            
            // Add new card if available
            if (currentPropertyIndex + 2 < sampleProperties.length) {
                const newProperty = sampleProperties[currentPropertyIndex + 2];
                const newCard = createPropertyCard(newProperty, 2);
                container.appendChild(newCard);
                addSwipeListeners();
            }
            
            // Check if no more properties
            if (container.children.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-heart"></i></div>
                        <div class="empty-title">Voc√™ viu todos os im√≥veis!</div>
                        <div class="empty-description">Que tal cadastrar seu pr√≥prio im√≥vel ou ajustar seus filtros de busca?</div>
                    </div>
                `;
            }
        }

        // Search Functions
        function switchSearchTab(tab) {
            currentSearchTab = tab;
            
            // Update tab buttons
            document.querySelectorAll('.search-tab').forEach(tabBtn => {
                tabBtn.classList.remove('active');
            });
            
            document.querySelectorAll('.search-content').forEach(content => {
                content.classList.remove('active');
            });
            
            if (tab === 'properties') {
                document.querySelector('.search-tab').classList.add('active');
                document.getElementById('propertySearch').classList.add('active');
            } else {
                document.querySelectorAll('.search-tab')[1].classList.add('active');
                document.getElementById('userSearch').classList.add('active');
            }
        }

        function searchProperties() {
            const searchTerm = document.getElementById('propertySearchInput').value.toLowerCase();
            const propertyType = document.getElementById('propertyType').value;
            const bedrooms = document.getElementById('bedrooms').value;
            const location = document.getElementById('location').value;
            const minPrice = parseInt(document.getElementById('minPrice').value) || 0;
            const maxPrice = parseInt(document.getElementById('maxPrice').value) || Infinity;
            
            let filteredProperties = sampleProperties.filter(property => {
                const matchesSearch = !searchTerm || 
                    property.title.toLowerCase().includes(searchTerm) ||
                    property.location.toLowerCase().includes(searchTerm) ||
                    property.description.toLowerCase().includes(searchTerm);
                
                const matchesType = !propertyType || property.type === propertyType;
                const matchesBedrooms = !bedrooms || property.bedrooms >= parseInt(bedrooms);
                const matchesLocation = !location || property.city === location;
                const matchesPrice = property.price >= minPrice && property.price <= maxPrice;
                
                return matchesSearch && matchesType && matchesBedrooms && matchesLocation && matchesPrice;
            });
            
            displayPropertyResults(filteredProperties);
        }

        function displayPropertyResults(properties) {
            const resultsContainer = document.getElementById('propertyResults');
            
            if (properties.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-search"></i></div>
                        <div class="empty-title">Nenhum im√≥vel encontrado</div>
                        <div class="empty-description">Tente ajustar os filtros de busca</div>
                    </div>
                `;
                return;
            }
            
            resultsContainer.innerHTML = properties.map(property => `
                <div class="result-card">
                    <img src="${property.image}" alt="${property.title}" class="result-image">
                    <div class="result-info">
                        <div class="result-price">R$ ${property.price.toLocaleString('pt-BR')}</div>
                        <div class="result-title">${property.title}</div>
                        <div class="result-location">
                            <i class="fas fa-map-marker-alt"></i>
                            ${property.location}
                        </div>
                        <div class="result-features">
                            <div class="feature">
                                <i class="fas fa-bed"></i>
                                ${property.bedrooms}
                            </div>
                            <div class="feature">
                                <i class="fas fa-bath"></i>
                                ${property.bathrooms}
                            </div>
                            <div class="feature">
                                <i class="fas fa-ruler-combined"></i>
                                ${property.area}m¬≤
                            </div>
                        </div>
                        <div class="result-actions">
                            <button class="btn-contact" onclick="contactOwner(${property.id})">
                                <i class="fas fa-phone"></i> Entrar em Contato
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function searchUsers() {
            const searchTerm = document.getElementById('userSearchInput').value.toLowerCase();
            const userType = document.getElementById('userType').value;
            const sortBy = document.getElementById('userSort').value;
            
            let filteredUsers = sampleUsers.filter(user => {
                const matchesSearch = !searchTerm || 
                    user.name.toLowerCase().includes(searchTerm) ||
                    user.type.toLowerCase().includes(searchTerm);
                
                const matchesType = !userType || user.type === userType;
                
                return matchesSearch && matchesType;
            });
            
            // Sort users
            filteredUsers.sort((a, b) => {
                switch (sortBy) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'recent':
                        return b.id - a.id;
                    case 'properties':
                        return b.properties - a.properties;
                    default:
                        return 0;
                }
            });
            
            displayUserResults(filteredUsers);
        }

        function displayUserResults(users) {
            const resultsContainer = document.getElementById('userResults');
            
            if (users.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-users"></i></div>
                        <div class="empty-title">Nenhum usu√°rio encontrado</div>
                        <div class="empty-description">Tente ajustar os filtros de busca</div>
                    </div>
                `;
                return;
            }
            
            resultsContainer.innerHTML = users.map(user => `
                <div class="result-card">
                    <div class="result-info">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <div class="user-avatar" style="width: 60px; height: 60px; font-size: 1.5rem;">
                                ${user.avatar}
                            </div>
                            <div>
                                <div class="result-title">${user.name}</div>
                                <div class="result-location">
                                    <i class="fas fa-user"></i>
                                    ${getUserTypeLabel(user.type)}
                                </div>
                            </div>
                        </div>
                        <div class="result-features">
                            <div class="feature">
                                <i class="fas fa-envelope"></i>
                                ${user.email}
                            </div>
                            <div class="feature">
                                <i class="fas fa-phone"></i>
                                ${user.phone}
                            </div>
                            <div class="feature">
                                <i class="fas fa-home"></i>
                                ${user.properties} im√≥veis
                            </div>
                        </div>
                        <div class="result-actions">
                            <button class="btn-contact" onclick="contactUser(${user.id})">
                                <i class="fas fa-message"></i> Entrar em Contato
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function clearFilters() {
            document.getElementById('propertySearchInput').value = '';
            document.getElementById('propertyType').value = '';
            document.getElementById('bedrooms').value = '';
            document.getElementById('location').value = '';
            document.getElementById('minPrice').value = '';
            document.getElementById('maxPrice').value = '';
            searchProperties();
        }

        function clearUserFilters() {
            document.getElementById('userSearchInput').value = '';
            document.getElementById('userType').value = '';
            document.getElementById('userSort').value = 'name';
            searchUsers();
        }

        // Matches Functions
        function loadMatches() {
            const matchesList = document.getElementById('matchesList');
            
            if (matches.length === 0) {
                matchesList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-heart"></i></div>
                        <div class="empty-title">Nenhum match ainda</div>
                        <div class="empty-description">Comece explorando im√≥veis na se√ß√£o "Buscar" para encontrar seus matches!</div>
                    </div>
                `;
                return;
            }
            
            matchesList.innerHTML = matches.map(property => `
                <div class="match-card">
                    <div class="match-badge">
                        <i class="fas fa-heart"></i>
                    </div>
                    <img src="${property.image}" alt="${property.title}" class="result-image">
                    <div class="result-info">
                        <div class="result-price">R$ ${property.price.toLocaleString('pt-BR')}</div>
                        <div class="result-title">${property.title}</div>
                        <div class="result-location">
                            <i class="fas fa-map-marker-alt"></i>
                            ${property.location}
                        </div>
                        <div class="result-features">
                            <div class="feature">
                                <i class="fas fa-bed"></i>
                                ${property.bedrooms}
                            </div>
                            <div class="feature">
                                <i class="fas fa-bath"></i>
                                ${property.bathrooms}
                            </div>
                            <div class="feature">
                                <i class="fas fa-ruler-combined"></i>
                                ${property.area}m¬≤
                            </div>
                        </div>
                        <div class="result-actions">
                            <button class="btn-contact" onclick="contactOwner(${property.id})">
                                <i class="fas fa-phone"></i> Entrar em Contato
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function toggleMatchView(view) {
            const listView = document.getElementById('matchesList');
            const mapView = document.getElementById('matchesMap');
            const toggleBtns = document.querySelectorAll('.toggle-btn');
            
            toggleBtns.forEach(btn => btn.classList.remove('active'));
            
            if (view === 'list') {
                listView.style.display = 'grid';
                mapView.classList.remove('active');
                toggleBtns[0].classList.add('active');
            } else {
                listView.style.display = 'none';
                mapView.classList.add('active');
                toggleBtns[1].classList.add('active');
                initializeMap();
            }
        }

        function initializeMap() {
            if (map) {
                map.remove();
            }
            
            map = L.map('map').setView([-23.5505, -46.6333], 11);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
            
            // Clear existing markers
            mapMarkers.forEach(marker => map.removeLayer(marker));
            mapMarkers = [];
            
            // Add markers for matches
            matches.forEach(property => {
                if (property.coordinates) {
                    const marker = L.marker(property.coordinates).addTo(map);
                    
                    const popupContent = `
                        <div style="text-align: center; min-width: 200px;">
                            <img src="${property.image}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 10px;">
                            <h3 style="margin: 0 0 5px 0; color: var(--primary-color);">R$ ${property.price.toLocaleString('pt-BR')}</h3>
                            <p style="margin: 0 0 5px 0; font-weight: 600;">${property.title}</p>
                            <p style="margin: 0 0 10px 0; color: #666; font-size: 0.9rem;">
                                <i class="fas fa-map-marker-alt"></i> ${property.location}
                            </p>
                            <div style="display: flex; justify-content: center; gap: 15px; margin-bottom: 10px; font-size: 0.9rem; color: #666;">
                                <span><i class="fas fa-bed"></i> ${property.bedrooms}</span>
                                <span><i class="fas fa-bath"></i> ${property.bathrooms}</span>
                                <span><i class="fas fa-ruler-combined"></i> ${property.area}m¬≤</span>
                            </div>
                            <button onclick="contactOwner(${property.id})" style="background: var(--secondary-color); color: var(--primary-color); border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                <i class="fas fa-phone"></i> Contato
                            </button>
                        </div>
                    `;
                    
                    marker.bindPopup(popupContent);
                    mapMarkers.push(marker);
                }
            });
            
            // Fit map to show all markers
            if (mapMarkers.length > 0) {
                const group = new L.featureGroup(mapMarkers);
                map.fitBounds(group.getBounds().pad(0.1));
            }
        }

        function centerMap() {
            if (map && mapMarkers.length > 0) {
                const group = new L.featureGroup(mapMarkers);
                map.fitBounds(group.getBounds().pad(0.1));
            }
        }

        function toggleMapLayer() {
            // This would toggle between different map layers in a real implementation
            showToast('Funcionalidade de camadas ser√° implementada em breve', 'info');
        }

        // Property Management Functions
        function showPropertyModal() {
            document.getElementById('propertyModal').classList.add('active');
        }

        function loadMyProperties() {
            const container = document.getElementById('myPropertiesList');
            
            if (userProperties.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-home"></i></div>
                        <div class="empty-title">Nenhum im√≥vel cadastrado</div>
                        <div class="empty-description">Clique no bot√£o "Novo Im√≥vel" para cadastrar seu primeiro im√≥vel</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = userProperties.map(property => `
                <div class="my-property-card">
                    <div class="property-status status-${property.status}">
                        ${property.status === 'active' ? 'Ativo' : property.status === 'pending' ? 'Pendente' : 'Inativo'}
                    </div>
                    <img src="${property.image}" alt="${property.title}" class="result-image">
                    <div class="result-info">
                        <div class="result-price">R$ ${property.price.toLocaleString('pt-BR')}</div>
                        <div class="result-title">${property.title}</div>
                        <div class="result-location">
                            <i class="fas fa-map-marker-alt"></i>
                            ${property.location}
                        </div>
                        <div class="result-features">
                            <div class="feature">
                                <i class="fas fa-eye"></i>
                                ${property.views || 0} visualiza√ß√µes
                            </div>
                            <div class="feature">
                                <i class="fas fa-heart"></i>
                                ${property.likes || 0} curtidas
                            </div>
                        </div>
                        <div class="property-actions">
                            <button class="btn btn-edit" onclick="editProperty(${property.id})">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn btn-delete" onclick="deleteProperty(${property.id})">
                                <i class="fas fa-trash"></i> Excluir
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadAccountProperties() {
            const container = document.getElementById('accountPropertiesList');
            loadMyProperties();
            container.innerHTML = document.getElementById('myPropertiesList').innerHTML;
        }

        // Handle Property Form
        document.getElementById('propertyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newProperty = {
                id: Date.now(),
                title: document.getElementById('propertyTitle').value,
                type: document.getElementById('propertyTypeSelect').value,
                price: parseInt(document.getElementById('propertyPrice').value),
                location: `${document.getElementById('propertyNeighborhood').value}, ${document.getElementById('propertyCity').value}`,
                city: document.getElementById('propertyCity').value,
                neighborhood: document.getElementById('propertyNeighborhood').value,
                bedrooms: parseInt(document.getElementById('propertyBedrooms').value),
                bathrooms: parseInt(document.getElementById('propertyBathrooms').value),
                area: parseInt(document.getElementById('propertyArea').value),
                description: document.getElementById('propertyDescription').value,
                image: "https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=400&h=300&fit=crop",
                owner: currentUser.name,
                ownerType: getUserTypeLabel(currentUser.type),
                status: 'active',
                views: 0,
                likes: 0,
                coordinates: [-23.5505, -46.6333] // Default coordinates
            };
            
            userProperties.push(newProperty);
            localStorage.setItem('userProperties', JSON.stringify(userProperties));
            
            closeModal('propertyModal');
            showToast('Im√≥vel cadastrado com sucesso!', 'success');
            updateDashboardStats();
            loadMyProperties();
            
            // Reset form
            document.getElementById('propertyForm').reset();
        });

        // Utility Functions
        function showMatchModal(property, superLike = false) {
            const modal = document.getElementById('matchModal');
            const content = document.getElementById('matchContent');
            
            content.innerHTML = `
                <div style="margin-bottom: 2rem;">
                    <img src="${property.image}" style="width: 200px; height: 150px; object-fit: cover; border-radius: 12px; margin-bottom: 1rem;">
                    <h3>${property.title}</h3>
                    <p>R$ ${property.price.toLocaleString('pt-BR')}</p>
                </div>
                <p>${superLike ? 'Super Like! ‚≠ê' : 'Voc√™ curtiu este im√≥vel! üíñ'}</p>
                <p>Agora voc√™ pode entrar em contato com ${property.owner}.</p>
            `;
            
            modal.classList.add('active');
        }

        function contactOwner(propertyId) {
            const property = sampleProperties.find(p => p.id === propertyId) || 
                           userProperties.find(p => p.id === propertyId);
            
            if (property) {
                showToast(`Entrando em contato com ${property.owner}...`, 'info');
                // In a real app, this would open a contact form or messaging system
            }
        }

        function contactUser(userId) {
            const user = sampleUsers.find(u => u.id === userId);
            if (user) {
                showToast(`Entrando em contato com ${user.name}...`, 'info');
            }
        }

        function editProperty(propertyId) {
            showToast('Funcionalidade de edi√ß√£o ser√° implementada em breve', 'info');
        }

        function deleteProperty(propertyId) {
            if (confirm('Tem certeza que deseja excluir este im√≥vel?')) {
                userProperties = userProperties.filter(p => p.id !== propertyId);
                localStorage.setItem('userProperties', JSON.stringify(userProperties));
                loadMyProperties();
                updateDashboardStats();
                showToast('Im√≥vel exclu√≠do com sucesso!', 'success');
            }
        }

        function updateDashboardStats() {
            document.getElementById('viewedCount').textContent = viewedProperties.length;
            document.getElementById('matchesCount').textContent = matches.length;
            document.getElementById('myPropertiesCount').textContent = userProperties.length;
            
            const totalViews = userProperties.reduce((sum, property) => sum + (property.views || 0), 0);
            document.getElementById('totalViews').textContent = totalViews;
        }

        function loadUserData() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserInfo();
            }
        }

        function loadMatches() {
            const savedMatches = localStorage.getItem('matches');
            if (savedMatches) {
                matches = JSON.parse(savedMatches);
            }
            
            const savedViewed = localStorage.getItem('viewedProperties');
            if (savedViewed) {
                viewedProperties = JSON.parse(savedViewed);
            }
        }

        function loadUserProperties() {
            const savedProperties = localStorage.getItem('userProperties');
            if (savedProperties) {
                userProperties = JSON.parse(savedProperties);
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            
            const icon = type === 'success' ? 'check-circle' : 
                        type === 'error' ? 'exclamation-circle' : 
                        'info-circle';
            
            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas fa-${icon}"></i>
                </div>
                <div class="toast-message">${message}</div>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        function logout() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('matches');
            localStorage.removeItem('viewedProperties');
            localStorage.removeItem('userProperties');
            
            currentUser = null;
            matches = [];
            viewedProperties = [];
            userProperties = [];
            
            document.getElementById('appContainer').style.display = 'none';
            document.getElementById('landingPage').style.display = 'flex';
            
            showToast('Logout realizado com sucesso!', 'success');
        }

        // Handle Profile Form
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            currentUser.name = document.getElementById('editName').value;
            currentUser.nickname = document.getElementById('editNickname').value;
            currentUser.email = document.getElementById('editEmail').value;
            currentUser.phone = document.getElementById('editPhone').value;
            currentUser.type = document.getElementById('editUserType').value;
            
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateUserInfo();
            showToast('Perfil atualizado com sucesso!', 'success');
        });

        // Handle Password Form
        document.getElementById('passwordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!newPassword || !confirmPassword) {
                showToast('Por favor, preencha todos os campos', 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showToast('As senhas n√£o coincidem', 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showToast('A senha deve ter pelo menos 6 caracteres', 'error');
                return;
            }
            
            // In a real app, this would make an API call
            currentUser.password = newPassword;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Clear form
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            
            showToast('Senha alterada com sucesso!', 'success');
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('swipe').classList.contains('active')) {
                switch(e.key) {
                    case 'ArrowLeft':
                        rejectProperty();
                        break;
                    case 'ArrowRight':
                        likeProperty();
                        break;
                    case 'ArrowUp':
                        superLikeProperty();
                        break;
                }
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showApp();
            }
        });
    </script>
</body>
</html>

